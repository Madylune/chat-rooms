{"version":3,"sources":["assets/chatrooms_logo.png","assets/user.jpg","services/firebase.js","config.js","helpers/db.js","helpers/utils.js","helpers/auth.js","helpers/routes.js","pages/Login.js","actions/currentUser.js","reducers/currentUser.js","reducers/index.js","services/store.js","components/Header.js","pages/Home.js","components/AvatarBadge.js","components/Message.js","helpers/theme.js","pages/Chat.js","pages/Signup.js","helpers/fixtures.js","pages/Rooms.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","db","database","addFirebaseNode","a","path","entity","ref","get","id","push","key","node","child","set","fetchFirebaseNode","query","q","once","snapshot","val","writeMessages","message","content","timestamp","userId","uid","room","createUser","user","displayName","email","photoURL","fetchUserById","createRoom","data","title","createdAt","createBy","access","code","padStart","random","fetchRoomByCode","orderByChild","equalTo","limitToLast","rooms","flow","sortBy","last","Object","values","signup","password","createUserWithEmailAndPassword","signin","signInWithEmailAndPassword","updateUserData","currentUser","updateProfile","then","catch","error","console","log","getPath","routeName","params","StyledLogin","styled","div","StyledButton","Button","withRouter","history","useState","setError","setEmail","setPassword","handleSubmit","e","preventDefault","onSubmit","placeholder","name","type","onChange","target","value","size","variant","updateCurrentUser","payload","removeCurrentUser","reducer","state","reducers","combineReducers","store","createStore","rootReducer","applyMiddleware","dispatch","StyledHeader","StyledLogo","img","setUser","useEffect","logout","signOut","src","require","alt","onClick","StyledHome","StyledContent","StyledForm","form","username","setUsername","signInAnonymously","userData","to","TextField","label","color","StyledBadge","Badge","AvatarBadge","anchorOrigin","vertical","horizontal","Avatar","StyledWrapper","StyledUser","StyledUsername","StyledMessage","props","isCurrentUser","Message","useSelector","fetchUser","BREAKPOINTS","xs","sm","md","lg","StyledChat","StyledTitle","h1","StyledInfo","StyledMessages","StyledIconButton","IconButton","Chat","undefined","messages","handleChange","setState","Date","now","this","on","capitalize","window","map","aria-label","Component","connect","match","StyledInput","Signup","disabled","ROOMS","StyledRooms","Rooms","roomEntity","err","RadioGroup","FormControlLabel","control","Radio","PrivateRoute","component","authenticated","rest","render","pathname","from","location","PublicRoute","App","loading","onAuthStateChanged","basename","process","exact","Home","Boolean","hostname","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.3eef9d00.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/chatrooms_logo.ff196929.png\";","module.exports = __webpack_public_path__ + \"static/media/user.3c77b7c2.jpg\";","import firebase from 'firebase/app'\nimport 'firebase/auth'\nimport 'firebase/database'\nimport { FIREBASE_CONFIG } from '../config'\n\nfirebase.initializeApp(FIREBASE_CONFIG)\n\nexport const auth = firebase.auth\nexport const db = firebase.database()","export const FIREBASE_CONFIG = {\n  apiKey: \"AIzaSyABrFCQSJz9_Pt74JlNNrJn-0-8fLTF2ck\",\n  authDomain: \"chat-c5a1b.firebaseapp.com\",\n  databaseURL: \"https://chat-c5a1b.firebaseio.com\",\n  projectId: \"chat-c5a1b\",\n  storageBucket: \"chat-c5a1b.appspot.com\",\n  messagingSenderId: \"192394678210\",\n  appId: \"1:192394678210:web:a1fec82d3182705707d05b\",\n  measurementId: \"G-NK798QJTRN\"\n}","import { db } from '../services/firebase'\nimport get from 'lodash/fp/get'\nimport flow from 'lodash/fp/flow'\nimport sortBy from 'lodash/fp/sortBy'\nimport last from 'lodash/fp/last'\nimport { generateRoomCode } from './utils'\n\nexport const addFirebaseNode = async ({ path, entity }) => {\n  const ref = db.ref(path)\n  const id = get('id', entity) ? entity.id : await ref.push().key\n  const node = {\n    id,\n    ...entity\n  }\n  await ref.child(id).set(node)\n  return node\n}\n\nexport const updateFirebaseNode = async ({ path, entity, query = q => q }) => {\n  const ref = db.ref(path)\n  const id = get('id', entity) ? entity.id : await ref.push().key\n  await query(ref).update({\n    ...entity,\n    id\n  })\n  return entity\n}\n\nexport const listenFirebaseNode = async ({ path, onData, query = q => q }) => {\n  const ref = query(db.ref(path))\n  ref.off()\n  ref.on('value', snapshot => {\n    const val = snapshot.val()\n    onData && onData(val)\n  })\n  return path\n}\n\nexport const fetchFirebaseNode = async ({ path, query = q => q }) => {\n  const snapshot = await query(db.ref(path)).once('value')\n  return snapshot.val()\n}\n\nexport const writeMessages = async message => {\n  const entity = {\n    content: message.content,\n    timestamp: message.timestamp,\n    userId: message.uid,\n    room: message.room\n  }\n  await addFirebaseNode({\n    path: '/messages',\n    entity\n  })\n}\n\nexport const createUser = async user => {\n  const entity = {\n    displayName: user.displayName,\n    email: user.email,\n    id: user.uid,\n    photoURL: user.photoURL\n  }\n  await addFirebaseNode({\n    path: '/users',\n    entity\n  })\n}\n\nexport const fetchUserById = async userId => {\n  const user = await fetchFirebaseNode({\n    path: `users/${userId}`\n  })\n  return user\n}\n\nexport const createRoom = async data => {\n  const entity = {\n    title: data.title,\n    createdAt: data.timestamp,\n    createBy: data.userId,\n    access: data.access,\n    code: generateRoomCode()\n  }\n  const room = await addFirebaseNode({\n    path: '/rooms',\n    entity\n  })\n  return room\n}\n\nexport const fetchRoomByCode = async code => {\n  const rooms = await fetchFirebaseNode({\n    path: '/rooms',\n    query: q => \n      q\n        .orderByChild('code')\n        .equalTo(code)\n        .limitToLast(1)\n  })\n  const room = flow(\n    sortBy('createdAt'),\n    last\n  )(Object.values(rooms))\n\n  return room\n}","import random from 'lodash/random'\nimport padStart from 'lodash/padStart'\n\nexport const generateRoomCode = () => padStart(random(0, 9999), 4, '0')","import { auth } from '../services/firebase'\nimport { createUser } from '../helpers/db'\n\nexport const signup = (email, password) => \n  auth().createUserWithEmailAndPassword(email, password)\n\nexport const signin = (email, password) =>\n  auth().signInWithEmailAndPassword(email, password)\n\nexport const signout = () => \n  auth().signOut()\n\nexport const signinAsGuest = () =>\n  auth().signInAnonymously()\n\nexport const updateUserData = user => {\n  const currentUser = auth().currentUser\n  currentUser.updateProfile(user).then(async () => {\n    await createUser(user)\n  }).catch(error => {\n    console.log('Error updating user data:', error);\n  })\n}\n","export const getPath = (routeName, params = {}) => {\n  switch (routeName) {\n    case 'home':\n      return '/'\n    case 'signup':\n      return '/signup'\n    case 'rooms':\n      return '/rooms'\n    case 'room':\n      return `/room/${params.code}`\n    default:\n      return routeName\n  }\n}\n\nexport default {}","import React, { useState } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { signin } from '../helpers/auth'\nimport { getPath } from '../helpers/routes'\nimport Button from '@material-ui/core/Button'\n\nconst StyledLogin = styled.div`\n  input {\n    margin: 0 3px;\n  }\n  button {\n    margin-right: 5px;\n  }\n`\n\nconst StyledButton = styled(Button)`\n  && {\n    color: #ffffff;\n    border-color: #ffffff;\n  }\n`\n\nconst Login = ({ history }) => {\n  const [ error, setError ] = useState(null)\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n\n  const handleSubmit = async e => {\n    e.preventDefault()\n    setError('')\n    try {\n      const user = await signin(email, password)\n      user && history.push(getPath('rooms'))\n    } catch (err) {\n      setError(err.message)\n    }\n  }\n\n  return (\n    <StyledLogin>\n      <form onSubmit={handleSubmit}>\n        <input \n          placeholder=\"Email\" \n          name=\"email\" \n          type=\"email\" \n          onChange={e => setEmail(e.target.value)}\n          value={email}>\n        </input>\n        <input \n          placeholder=\"Password\" \n          name=\"password\" \n          type=\"password\" \n          onChange={e => setPassword(e.target.value)}\n          value={password}>\n        </input>\n        {error ? <p>{error}</p> : null}\n        <StyledButton size=\"small\" variant=\"outlined\" type=\"submit\">\n          Login\n        </StyledButton>\n      </form>\n    </StyledLogin>\n  )\n}\n\nexport default withRouter(Login)","export const UPDATE_CURRENT_USER = 'update.current.user'\nexport const updateCurrentUser = user => ({\n  type: UPDATE_CURRENT_USER,\n  payload: { user }\n})\n\nexport const REMOVE_CURRENT_USER = 'entities.remove'\nexport const removeCurrentUser = user => ({\n  type: REMOVE_CURRENT_USER,\n  payload: { user }\n})","import { UPDATE_CURRENT_USER, REMOVE_CURRENT_USER } from '../actions/currentUser'\n\nconst reducer = (state = [], { type, payload }) => {\n  switch (type) {\n    case UPDATE_CURRENT_USER:\n      return {\n        ...state,\n        ...payload.user\n      }\n    case REMOVE_CURRENT_USER:\n      return {\n        ...payload.user\n      }\n    default:\n      return state\n  }\n}\n\nexport default reducer","import { combineReducers } from 'redux'\nimport currentUser from './currentUser'\n\nconst reducers = combineReducers({\n  currentUser\n})\n\nexport default reducers","import { applyMiddleware, createStore } from 'redux'\nimport logger from 'redux-logger'\nimport rootReducer from '../reducers'\n\nconst middlewares = []\nif (process.env.NODE_ENV === 'development') {\n  middlewares.push(logger)\n}\n\nconst store = createStore(rootReducer, applyMiddleware(...middlewares))\n\nexport const dispatch = store.dispatch\n\nexport default store","import React, { useState, useEffect } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { auth } from '../services/firebase'\nimport { signout } from '../helpers/auth'\nimport get from 'lodash/fp/get'\nimport Login from '../pages/Login'\nimport { getPath } from '../helpers/routes'\nimport { dispatch } from '../services/store'\nimport { removeCurrentUser } from '../actions/currentUser'\nimport Button from '@material-ui/core/Button'\n\nconst StyledHeader = styled.div`\n  position: absolute;\n  top: 0;\n  background-color: #625672;\n  height: 50px;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: #ffffff;\n\n  button {\n    margin-right: 5px;\n  }\n`\n\nconst StyledLogo = styled.img`\n  height: 100%;\n  cursor: pointer;\n`\n\nconst StyledButton = styled(Button)`\n  && {\n    color: #ffffff;\n    border-color: #ffffff;\n  }\n`\n\nconst Header = ({ history }) => {\n  const [ currentUser, setUser ] = useState()\n\n  useEffect(() => {\n    setUser(auth().currentUser)\n  }, [])\n\n  const logout = async() => {\n    const user = await signout()\n    dispatch(removeCurrentUser(user))\n  }\n\n  const backToHome = () => currentUser ? history.push(getPath('rooms')) : history.push(getPath('home'))\n\n  return (\n    <StyledHeader>\n      <StyledLogo src={require(\"../assets/chatrooms_logo.png\")} alt=\"Logo Chat Rooms\" onClick={backToHome} />\n      {currentUser \n      ? (\n        <>\n          <div>\n            Login in as: <strong>{get('displayName', currentUser) ? get('displayName', currentUser) : 'Anonyme'}</strong>\n          </div>\n          <StyledButton size=\"small\" variant=\"outlined\" type=\"submit\" onClick={logout}>\n            Logout\n          </StyledButton>\n        </>\n      )\n      : <Login />\n      }\n    </StyledHeader>\n  )\n}\n\nexport default withRouter(Header)","import React, { useState } from 'react'\nimport { Link, withRouter } from 'react-router-dom'\nimport { signinAsGuest, updateUserData } from '../helpers/auth'\nimport Header from '../components/Header'\nimport styled from 'styled-components'\nimport get from 'lodash/fp/get'\nimport { dispatch } from '../services/store'\nimport { updateCurrentUser } from '../actions/currentUser'\nimport { getPath } from '../helpers/routes'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\n\nconst StyledHome = styled.div`\n  text-align: center;\n`\n\nconst StyledContent = styled.div`\n  margin-top: 100px;\n`\n\nconst StyledForm = styled.form`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`\n\nconst StyledButton = styled(Button)`\n  && {\n    margin: 10px;\n  }\n`\n\nconst Home = ({ history }) => {\n  const [ error, setError ] = useState(null)\n  const [ username, setUsername ] = useState('')\n\n  const handleSubmit = async e => {\n    e.preventDefault()\n    setError('')\n    try {\n      const user = await signinAsGuest()\n      const userData = {\n        ...get('user', user),\n        displayName: username\n      }\n      \n      await updateUserData(userData)\n      dispatch(updateCurrentUser(userData))\n\n      user && history.push(getPath('rooms'))\n    } catch (err) {\n      console.log('err', err.message)\n      setError(err.message)\n    }\n  }\n  \n  return (\n    <StyledHome>\n      <Header />\n      <StyledContent>\n      <h2>Join a room and chat with other people or create yours to invite your friends !</h2>\n\n      <p>Create your account: <Link to=\"/signup\">Sign Up</Link></p>\n\n      <p>Or chat as guest: </p>\n      <StyledForm onSubmit={handleSubmit}>\n        <TextField \n          label=\"Username\" \n          variant=\"outlined\" \n          name=\"username\" \n          onChange={e => setUsername(e.target.value)}\n          value={username} />\n        {error ? <p>{error}</p> : null}\n        <StyledButton variant=\"contained\" color=\"primary\" type=\"submit\">\n          Start chatting !\n        </StyledButton>\n      </StyledForm>\n      </StyledContent>\n    </StyledHome>\n  )\n}\n\nexport default withRouter(Home)","import React from 'react'\nimport styled from 'styled-components'\nimport Badge from '@material-ui/core/Badge'\nimport Avatar from '@material-ui/core/Avatar'\n\nconst StyledBadge = styled(Badge)`\n  && {\n    .MuiBadge-dot {\n      background-color: #44b700;\n    }\n  }\n`\n\nconst AvatarBadge = () => {\n  return (\n    <div>\n      <StyledBadge \n        variant=\"dot\" \n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'right',\n        }}\n      >\n        <Avatar alt=\"User's avatar\" src={require('../assets/user.jpg')} />\n      </StyledBadge>\n    </div>\n  )\n}\n\nexport default AvatarBadge","import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport get from 'lodash/fp/get'\nimport { useSelector } from 'react-redux'\nimport AvatarBadge from './AvatarBadge'\nimport { fetchUserById } from '../helpers/db'\n\nconst StyledWrapper = styled.div`\n  display: flex;\n  align-items: flex-start;\n  margin: 15px 0;\n`\n\nconst StyledUser = styled.div`\n  display: flex;\n  align-items: center;\n`\n\nconst StyledUsername = styled.div`\n  font-weight: bold;\n  margin: 0 5px;\n`\n\nconst StyledMessage = styled.div`\n  background-color: ${props => props.isCurrentUser ? '#f9d3b2' : '#cbe3fb'};\n  border-radius: 40px;\n  padding: 10px 20px;\n  width: fit-content;\n`\n\nconst Message = ({ message }) => {\n  const [ user, setUser ] = useState()\n  const currentUser = useSelector(state => state.currentUser)\n  const isCurrentUser = get('uid', currentUser) === get('userId', message)\n\n  useEffect(() => {\n    async function fetchUser() {\n      const user = await fetchUserById(get('userId', message))\n      setUser(user)\n    }\n    fetchUser()\n  }, [message])\n\n  return (\n    <StyledWrapper>\n      <StyledUser>\n        <AvatarBadge />\n        <StyledUsername>{get('displayName', user) ? get('displayName', user) : 'Anonyme'}:</StyledUsername>\n      </StyledUser>\n      <StyledMessage isCurrentUser={isCurrentUser}>\n        {get('content', message)}\n      </StyledMessage>\n    </StyledWrapper>\n  )\n}\n\nexport default Message","const BREAKPOINT_XS = 0\nconst BREAKPOINT_SM = 48\nconst BREAKPOINT_MD = 64\nconst BREAKPOINT_LG = 75\n\nexport const BREAKPOINTS = {\n  xs: `${BREAKPOINT_XS}em`,\n  sm: `${BREAKPOINT_SM}em`,\n  md: `${BREAKPOINT_MD}em`,\n  lg: `${BREAKPOINT_LG}em`\n}","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { auth, db } from '../services/firebase'\nimport { writeMessages, fetchRoomByCode } from '../helpers/db'\nimport get from 'lodash/fp/get'\nimport map from 'lodash/fp/map'\nimport capitalize from 'lodash/capitalize'\nimport Message from '../components/Message'\nimport Header from '../components/Header'\nimport IconButton from '@material-ui/core/IconButton'\nimport SendIcon from '@material-ui/icons/Send'\nimport { BREAKPOINTS } from '../helpers/theme'\n\nconst StyledChat = styled.div`\n  background-color: #a0d3ff;\n  height: 100vh;\n  margin: 0;\n  overflow: hidden;\n`\n\nconst StyledContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n\n  @media (max-width: ${BREAKPOINTS.sm}) {\n    padding-top: 20px;\n  }\n`\n\nconst StyledTitle = styled.h1`\n  color: #1977af;\n  @media (max-width: ${BREAKPOINTS.sm}) {\n    font-size: 20px;\n  }\n`\n\nconst StyledInfo = styled.div`\n  color: red;\n  text-align: center;\n  @media (max-width: ${BREAKPOINTS.sm}) {\n    font-size: 10px;\n  }\n`\n\nconst StyledMessages = styled.div`\n  background-color: #ffffff;\n  border: 3px solid #35aef5;\n  border-radius: 20px;\n  padding: 15px;\n  width: 70%;\n  height: 70%;\n  overflow-y: auto;\n\n  @media (max-width: ${BREAKPOINTS.sm}) {\n    width: 90%;\n    padding: 7px;\n    font-size: 12px;\n  }\n`\n\nconst StyledForm = styled.form`\n  width: 70%;\n  text-align: center;\n  margin: 10px;\n  display:flex;\n  align-items: center;\n\n  input {\n    height: 40px;\n    border-radius: 20px;\n    border: transparent;\n    padding: 5px 20px;\n    font-size: 16px;\n    flex-grow: 1;\n  }\n\n  @media (max-width: ${BREAKPOINTS.sm}) {\n    width: 90%;\n    margin: 0;\n    input {\n      height: 25px;\n    }\n  }\n`\n\nconst StyledIconButton = styled(IconButton)`\n  && {\n    background-color: #1977af;\n    color: #ffffff;\n    margin: 10px;\n\n    @media (max-width: ${BREAKPOINTS.sm}) {\n      margin: 5px;\n      padding: 9px;\n    }\n  }\n`\n\nclass Chat extends Component {\n  state = {\n    user: auth().currentUser,\n    room: undefined,\n    messages: [],\n    content: ''\n  }\n\n  async componentDidMount() {\n    const { code } = this.props\n    try {\n      db.ref('/messages').orderByChild('room').equalTo(code).on('value', snapshot => {\n        this.setState({ messages: snapshot.val() })\n      })\n      const room = await fetchRoomByCode(code)\n      this.setState({ room })\n    } catch (err) {\n      console.log(\"Fail to read messages\", err.message )\n    }\n  }\n\n  handleChange = e => this.setState({ content: e.target.value })\n\n  handleSubmit = async e => {\n    const { room, user, content } = this.state\n    e.preventDefault()\n    try {\n      const message = {\n        content: content,\n        timestamp: Date.now(),\n        uid: user.uid,\n        room: get('code', room) ? get('code', room) : this.props.code\n      }\n      await writeMessages(message)\n      this.setState({ content: '' })\n    } catch (err) {\n      console.log(\"Fail to write message\", err.message)\n    }\n  }\n\n  render() {\n    const { messages, content, room } = this.state\n    const { code } = this.props\n    return (\n      <StyledChat>      \n        <Header />\n        <StyledContent>\n          <StyledTitle>{get('title', room) || capitalize(code)}</StyledTitle>\n          {get('access', room) === 'private' && <StyledInfo>This room is private, invite your friends to join in: <strong>{get('location.href', window)}</strong></StyledInfo>}\n          <StyledMessages>\n            {map(message => \n              <Message key={get('timestamp', message)} message={message} />\n            , messages)}\n          </StyledMessages>\n          <StyledForm onSubmit={this.handleSubmit}>\n            <input onChange={this.handleChange} value={content}></input>\n            <StyledIconButton aria-label=\"send\" type=\"submit\">\n              <SendIcon />\n            </StyledIconButton>\n          </StyledForm>\n        </StyledContent>\n      </StyledChat>\n    )\n  }\n}\n\nconst mapStateToProps = (state, { match }) => {\n  const code = get('params.code', match)\n  return {\n    code\n  }\n}\n\nexport default connect(mapStateToProps)(Chat)","import React, { useState } from 'react'\nimport styled from 'styled-components'\nimport { signup, updateUserData } from '../helpers/auth'\nimport get from 'lodash/fp/get'\nimport { dispatch } from '../services/store'\nimport { updateCurrentUser } from '../actions/currentUser'\nimport Header from '../components/Header'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\n\nconst StyledForm = styled.form`\n  margin: 100px;\n`\n\nconst StyledInput = styled.div`\n  margin: 10px 0;\n`\n\nconst Signup = () => {\n  const [ error, setError ] = useState(null)\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n  const [ username, setUsername ] = useState('')\n\n  const handleSubmit = async e => {\n    e.preventDefault()\n    setError('')\n    try {\n      const user = await signup(email, password)\n      const userData = {\n        ...get('user', user),\n        displayName: username\n      }\n      await updateUserData(userData)\n      dispatch(updateCurrentUser(userData))\n    } catch (err) {\n      setError(err.message)\n    }\n  }\n\n  const disabled = !email || !password || !username\n\n  return (\n  <div>\n    <Header />\n    <StyledForm onSubmit={handleSubmit}>\n      <h1>\n        Sign Up\n      </h1>\n      <p>Fill in the form below to create an account.</p>\n      <StyledInput>\n        <TextField \n          label=\"Email\" \n          variant=\"outlined\" \n          name=\"email\" \n          type=\"email\"\n          onChange={e => setEmail(e.target.value)}\n          value={email} />\n      </StyledInput>\n      <StyledInput>\n        <TextField \n          label=\"Password\" \n          variant=\"outlined\" \n          name=\"password\" \n          type=\"password\"\n          onChange={e => setPassword(e.target.value)}\n          value={password} />\n      </StyledInput>\n      <StyledInput>\n        <TextField \n          label=\"Username\" \n          variant=\"outlined\" \n          name=\"username\" \n          onChange={e => setUsername(e.target.value)}\n          value={username} />\n      </StyledInput>\n      <div>\n        {error ? <p>{error}</p> : null}\n        <Button variant=\"contained\" color=\"primary\" type=\"submit\" disabled={disabled}>\n          Sign up\n        </Button>\n      </div>\n    </StyledForm>\n  </div>\n  )\n}\n\nexport default Signup","export const ROOMS = [\n  {\n    'title': 'General Room',\n    'access': 'public',\n    'id': '1',\n    'code': 'general'\n  },\n  {\n    'title': 'Music',\n    'access': 'public',\n    'id': '2',\n    'code': 'music'\n  },\n  {\n    'title': 'Movies',\n    'access': 'public',\n    'id': '3',\n    'code': 'movies'\n  },\n  {\n    'title': 'Sport',\n    'access': 'public',\n    'id': '4',\n    'code': 'sport'\n  },\n  {\n    'title': 'News',\n    'access': 'public',\n    'id': '5',\n    'code': 'news'\n  }\n]","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Link, withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\nimport Header from '../components/Header'\nimport map from 'lodash/fp/map'\nimport get from 'lodash/fp/get'\nimport { ROOMS } from '../helpers/fixtures'\nimport TextField from '@material-ui/core/TextField'\nimport Radio from '@material-ui/core/Radio'\nimport RadioGroup from '@material-ui/core/RadioGroup'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Button from '@material-ui/core/Button'\nimport { createRoom } from '../helpers/db'\nimport { getPath } from '../helpers/routes'\nimport { db } from '../services/firebase'\n\nconst StyledWrapper = styled.div`\n  background-color: #e4dcea;\n  height: 100vh;\n  margin: 0;\n  overflow: hidden;\n`\n\nconst StyledContent = styled.div`\n  padding: 50px;\n`\n\nconst StyledRooms = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n\nclass Rooms extends Component {\n  state = {\n    error: null,\n    title: '',\n    access: '',\n    rooms: []\n  }\n\n  async componentDidMount() {\n    try {\n      db.ref('/rooms').orderByChild('access').equalTo('public').on('value', snapshot => {\n        this.setState({ rooms: snapshot.val() })\n      })\n    } catch (err) {\n      console.log(\"Fail to fetch rooms\", err)\n    }\n  }\n\n  handleSubmit = async e => {\n    const { history, currentUser } = this.props\n    const { title, access } = this.state\n    e.preventDefault()\n    this.setState({ error: '' })\n    try {\n      const roomEntity = {\n        title,\n        timestamp: Date.now(),\n        userId: currentUser.uid,\n        access\n      }\n      const room = await createRoom(roomEntity)\n      room && history.push(getPath('room', { code: get('code', room) }))\n    } catch (err) {\n      this.setState({ error: err.message })\n    }\n  }\n\n  handleChange = e => this.setState({ [e.target.name]: e.target.value })\n\n  render() {\n    const { error, title, access, rooms } = this.state\n    return (\n      <StyledWrapper>      \n        <Header />\n        <StyledContent>\n          <h2>Create your room !</h2>\n          <form onSubmit={this.handleSubmit}>\n            <TextField \n              id=\"outlined-basic\" \n              label=\"Room's title\" \n              variant=\"outlined\" \n              name=\"title\" \n              onChange={this.handleChange}\n              value={title} />\n            <RadioGroup aria-label=\"access\" name=\"access\" value={access} onChange={this.handleChange}>\n              <FormControlLabel value=\"public\" control={<Radio />} label=\"Public\" />\n              <FormControlLabel value=\"private\" control={<Radio />} label=\"Private\" />\n            </RadioGroup>\n            <div>\n              {error ? <p>{error}</p> : null}\n              <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n                Create\n              </Button>\n            </div>\n          </form>\n          <hr></hr>\n          <h2>Or join an existing room:</h2>\n          <StyledRooms>\n            {map(room => (\n              <Link to={getPath('room', { code: get('code', room) })} key={room.id}>{get('title', room) ? get('title', room) : 'Chat Room'} - {get('access', room)}</Link>\n            ), ROOMS)}\n            {map(room => (\n              <Link to={getPath('room', { code: get('code', room) })} key={room.id}>{get('title', room) ? get('title', room) : 'Chat Room'} - {get('access', room)}</Link>\n            ), rooms)}\n          </StyledRooms>\n        </StyledContent>\n      </StyledWrapper>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  currentUser: state.currentUser\n})\n\nexport default withRouter(connect(mapStateToProps)(Rooms))","import React, { Component } from 'react'\nimport {\n  Route,\n  BrowserRouter as Router,\n  Switch,\n  Redirect\n} from 'react-router-dom'\nimport Home from './pages/Home'\nimport Chat from './pages/Chat'\nimport Signup from './pages/Signup'\nimport Rooms from './pages/Rooms'\nimport { auth } from './services/firebase'\nimport { dispatch } from './services/store'\nimport { updateCurrentUser } from './actions/currentUser'\nimport { getPath } from './helpers/routes'\n\nconst PrivateRoute = ({ component: Component, authenticated, ...rest }) => \n  <Route \n    {...rest}\n    render={props => authenticated\n      ? <Component {...props} />\n      : <Redirect to={{ pathname: \"/\", state: { from: props.location } }} />\n    }\n  />\n\nconst PublicRoute = ({ component: Component, authenticated, ...rest }) =>\n  <Route \n    {...rest}\n    render={props => !authenticated\n      ? <Component {...props} />\n      : <Redirect to={getPath('rooms')} />\n    }\n  />\n\nclass App extends Component {\n  state = {\n    authenticated: false,\n    loading: true\n  }\n\n  componentDidMount() {\n    auth().onAuthStateChanged(user => {\n      if (user) {\n        this.setState({ \n          authenticated: true,\n          loading: false\n        })\n        dispatch(updateCurrentUser(user))\n      } else {\n        this.setState({ \n          authenticated: false,\n          loading: false\n        })\n      }\n    })\n  }\n\n  render() {\n    const { authenticated, loading } = this.state\n    return loading \n      ? <h2>Loading...</h2>\n      : (\n        <Router basename={process.env.PUBLIC_URL}>\n          <Switch>\n            <Route exact path={getPath('home')} component={Home}></Route>\n            <PrivateRoute path={getPath('rooms')} authenticated={authenticated} component={Rooms}></PrivateRoute>\n            <PrivateRoute path={getPath('room', { code: ':code' })} authenticated={authenticated} component={Chat}></PrivateRoute>\n            <PublicRoute path={getPath('signup')} authenticated={authenticated} component={Signup}></PublicRoute>\n          </Switch>\n        </Router>\n      )\n  }\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux'\nimport store from './services/store'\n\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\nserviceWorker.unregister();\n"],"sourceRoot":""}