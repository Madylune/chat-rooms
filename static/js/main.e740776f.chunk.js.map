{"version":3,"sources":["assets/avatars sync /^/.//.*/.jpg$","assets/chatrooms_logo.png","assets/avatars/avatar-1.jpg","assets/avatars/avatar-2.jpg","assets/avatars/avatar-3.jpg","assets/avatars/avatar-4.jpg","assets/avatars/avatar-5.jpg","assets/avatars/avatar-6.jpg","assets/avatars/avatar-7.jpg","assets/avatars/avatar-8.jpg","services/firebase.js","config.js","helpers/db.js","helpers/utils.js","helpers/auth.js","helpers/routes.js","components/Login.js","actions/currentUser.js","reducers/currentUser.js","reducers/index.js","services/store.js","components/Header.js","helpers/fixtures.js","components/SelectAvatar.js","pages/Home.js","components/AvatarBadge.js","components/Message.js","helpers/theme.js","pages/Chat.js","pages/Signup.js","pages/Rooms.js","App.js","serviceWorker.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","db","database","addFirebaseNode","a","path","entity","ref","get","push","key","node","child","set","fetchFirebaseNode","query","q","once","snapshot","val","writeMessages","message","content","timestamp","userId","uid","room","createUser","user","displayName","email","photoURL","fetchUserById","createRoom","data","title","createdAt","createBy","access","padStart","random","fetchRoomByCode","orderByChild","equalTo","limitToLast","rooms","flow","sortBy","last","values","signup","password","createUserWithEmailAndPassword","signin","signInWithEmailAndPassword","updateUserData","currentUser","updateProfile","then","catch","error","console","log","getPath","routeName","params","StyledLogin","styled","div","StyledButton","Button","withRouter","history","useState","setError","setEmail","setPassword","handleSubmit","preventDefault","onSubmit","placeholder","name","type","onChange","target","value","size","variant","updateCurrentUser","payload","removeCurrentUser","reducer","state","reducers","combineReducers","store","createStore","rootReducer","applyMiddleware","dispatch","StyledHeader","StyledLogo","img","setUser","useEffect","logout","signOut","src","require","alt","onClick","ROOMS","AVATARS","times","i","SelectAvatar","setAvatar","avatar","Select","labelId","MenuItem","height","StyledHome","StyledContent","StyledForm","form","head","username","setUsername","signInAnonymously","userData","to","TextField","label","color","StyledBadge","Badge","AvatarBadge","userAvatar","anchorOrigin","vertical","horizontal","Avatar","StyledWrapper","StyledUser","StyledUsername","StyledMessage","props","isCurrentUser","Message","useSelector","fetchUser","BREAKPOINTS","xs","sm","md","lg","StyledChat","StyledTitle","h1","StyledInfo","StyledMessages","StyledIconButton","IconButton","Chat","undefined","messages","handleChange","setState","Date","now","this","on","capitalize","window","aria-label","Component","connect","match","StyledInput","Signup","disabled","StyledRooms","Rooms","roomEntity","err","RadioGroup","FormControlLabel","control","Radio","PrivateRoute","component","authenticated","rest","render","pathname","from","location","PublicRoute","App","loading","onAuthStateChanged","exact","Home","Boolean","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"mGAAA,IAAIA,EAAM,CACT,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,IAClB,iBAAkB,KAInB,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,K,0DC7BpBU,EAAOC,QAAU,IAA0B,4C,oBCA3CD,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,sC,0OCK3CC,IAASC,cCLsB,CAC7BC,OAAQ,0CACRC,WAAY,6BACZC,YAAa,oCACbC,UAAW,aACXC,cAAe,yBACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBDDV,IAAMC,EAAOV,IAASU,KAChBC,EAAKX,IAASY,W,0GEDdC,EAAe,uCAAG,qCAAAC,EAAA,yDAASC,EAAT,EAASA,KAAMC,EAAf,EAAeA,OACtCC,EAAMN,EAAGM,IAAIF,IACRG,IAAI,KAAMF,GAFQ,qBAEEA,EAAO5B,GAFT,sCAEoB6B,EAAIE,OAAOC,IAF/B,iCAEvBhC,EAFuB,KAGvBiC,EAHuB,aAI3BjC,MACG4B,GALwB,UAOvBC,EAAIK,MAAMlC,GAAImC,IAAIF,GAPK,iCAQtBA,GARsB,4CAAH,sDA+BfG,EAAiB,uCAAG,mCAAAV,EAAA,6DAASC,EAAT,EAASA,KAAT,IAAeU,aAAf,MAAuB,SAAAC,GAAC,OAAIA,GAA5B,WACRD,EAAMd,EAAGM,IAAIF,IAAOY,KAAK,SADjB,cACzBC,EADyB,yBAExBA,EAASC,OAFe,2CAAH,sDAKjBC,EAAa,uCAAG,WAAMC,GAAN,eAAAjB,EAAA,6DACrBE,EAAS,CACbgB,QAASD,EAAQC,QACjBC,UAAWF,EAAQE,UACnBC,OAAQH,EAAQI,IAChBC,KAAML,EAAQK,MALW,SAOrBvB,EAAgB,CACpBE,KAAM,YACNC,WATyB,2CAAH,sDAabqB,EAAU,uCAAG,WAAMC,GAAN,eAAAxB,EAAA,6DAClBE,EAAS,CACbuB,YAAaD,EAAKC,YAClBC,MAAOF,EAAKE,MACZpD,GAAIkD,EAAKH,IACTM,SAAUH,EAAKG,UALO,SAOlB5B,EAAgB,CACpBE,KAAM,SACNC,WATsB,2CAAH,sDAaV0B,EAAa,uCAAG,WAAMR,GAAN,eAAApB,EAAA,sEACRU,EAAkB,CACnCT,KAAK,SAAD,OAAWmB,KAFU,cACrBI,EADqB,yBAIpBA,GAJoB,2CAAH,sDAObK,EAAU,uCAAG,WAAMC,GAAN,iBAAA9B,EAAA,6DAClBE,EAAS,CACb6B,MAAOD,EAAKC,MACZC,UAAWF,EAAKX,UAChBc,SAAUH,EAAKV,OACfc,OAAQJ,EAAKI,OACbtD,KC/EkCuD,IAASC,IAAO,EAAG,MAAO,EAAG,MDyEzC,SAQLrC,EAAgB,CACjCE,KAAM,SACNC,WAVsB,cAQlBoB,EARkB,yBAYjBA,GAZiB,2CAAH,sDAeVe,EAAe,uCAAG,WAAMzD,GAAN,iBAAAoB,EAAA,sEACTU,EAAkB,CACpCT,KAAM,SACNU,MAAO,SAAAC,GAAC,OACNA,EACG0B,aAAa,QACbC,QAAQ3D,GACR4D,YAAY,MAPU,cACvBC,EADuB,OASvBnB,EAAOoB,IACXC,IAAO,aACPC,IAFWF,CAGX5D,OAAO+D,OAAOJ,IAZa,kBActBnB,GAdsB,2CAAH,sDExFfwB,EAAS,SAACpB,EAAOqB,GAAR,OACpBnD,IAAOoD,+BAA+BtB,EAAOqB,IAElCE,EAAS,SAACvB,EAAOqB,GAAR,OACpBnD,IAAOsD,2BAA2BxB,EAAOqB,IAQ9BI,EAAiB,SAAA3B,GACR5B,IAAOwD,YACfC,cAAc7B,GAAM8B,KAAhC,sBAAqC,sBAAAtD,EAAA,sEAC7BuB,EAAWC,GADkB,4CAElC+B,OAAM,SAAAC,GACPC,QAAQC,IAAI,4BAA6BF,O,QCpBhCG,EAAU,SAACC,GAA4B,IAAjBC,EAAgB,uDAAP,GAC1C,OAAQD,GACN,IAAK,OACH,MAAO,IACT,IAAK,SACH,MAAO,UACT,IAAK,QACH,MAAO,SACT,IAAK,OACH,MAAM,SAAN,OAAgBC,EAAOjF,MACzB,QACE,OAAOgF,I,kSCJb,IAAME,EAAcC,IAAOC,IAAV,KASXC,EAAeF,YAAOG,IAAPH,CAAH,KAiDHI,eA1CD,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACDC,mBAAS,MADR,mBACrBb,EADqB,KACdc,EADc,OAEDD,mBAAS,IAFR,mBAErB3C,EAFqB,KAEd6C,EAFc,OAGKF,mBAAS,IAHd,mBAGrBtB,EAHqB,KAGXyB,EAHW,KAKvBC,EAAY,uCAAG,WAAM/F,GAAN,SAAAsB,EAAA,6DACnBtB,EAAEgG,iBACFJ,EAAS,IAFU,kBAIErB,EAAOvB,EAAOqB,GAJhB,eAKTqB,EAAQ/D,KAAKsD,EAAQ,UALZ,gDAOjBW,EAAS,KAAIrD,SAPI,yDAAH,sDAWlB,OACE,kBAAC6C,EAAD,KACE,0BAAMa,SAAUF,GACd,2BACEG,YAAY,QACZC,KAAK,QACLC,KAAK,QACLC,SAAU,SAAArG,GAAC,OAAI6F,EAAS7F,EAAEsG,OAAOC,QACjCA,MAAOvD,IAET,2BACEkD,YAAY,WACZC,KAAK,WACLC,KAAK,WACLC,SAAU,SAAArG,GAAC,OAAI8F,EAAY9F,EAAEsG,OAAOC,QACpCA,MAAOlC,IAERS,EAAQ,2BAAIA,GAAa,KAC1B,kBAACS,EAAD,CAAciB,KAAK,QAAQC,QAAQ,WAAWL,KAAK,UAAnD,c,SCxDKM,I,OAAoB,SAAA5D,GAAI,MAAK,CACxCsD,KAFiC,sBAGjCO,QAAS,CAAE7D,WAIA8D,GAAoB,SAAA9D,GAAI,MAAK,CACxCsD,KAFiC,kBAGjCO,QAAS,CAAE7D,UCSE+D,GAhBC,WAAoC,IAAnCC,EAAkC,uDAA1B,GAA0B,yCAApBV,EAAoB,EAApBA,KAAMO,EAAc,EAAdA,QACnC,OAAQP,GACN,IDJ+B,sBCK7B,OAAO,2BACFU,GACAH,EAAQ7D,MAEf,IDH+B,kBCI7B,OAAO,eACF6D,EAAQ7D,MAEf,QACE,OAAOgE,ICPEC,GAJEC,aAAgB,CAC/BtC,iBCKF,IAAMuC,GAAQC,aAAYC,GAAaC,KAAe,WAAf,EALnB,KAOPC,GAAWJ,GAAMI,SAEfJ,M,0iBCDf,IAAMK,GAAejC,IAAOC,IAAV,MAgBZiC,GAAalC,IAAOmC,IAAV,MAKVjC,GAAeF,YAAOG,IAAPH,CAAH,MAyCHI,gBAlCA,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACGC,qBADH,mBACtBjB,EADsB,KACT+C,EADS,KAG9BC,qBAAU,WACRD,EAAQvG,IAAOwD,eACd,IAEH,IAAMiD,EAAM,uCAAG,4BAAArG,EAAA,sEPrCfJ,IAAO0G,UOqCQ,OACP9E,EADO,OAEbuE,GAAST,GAAkB9D,IAFd,2CAAH,qDAOZ,OACE,kBAACwE,GAAD,KACE,kBAACC,GAAD,CAAYM,IAAKC,EAAQ,KAAiCC,IAAI,kBAAkBC,QAJjE,kBAAMtD,EAAcgB,EAAQ/D,KAAKsD,EAAQ,UAAYS,EAAQ/D,KAAKsD,EAAQ,YAKxFP,EAEC,oCACE,6CACe,gCAAShD,IAAI,cAAegD,GAAehD,IAAI,cAAegD,GAAe,YAE5F,kBAAC,GAAD,CAAc8B,KAAK,QAAQC,QAAQ,WAAWL,KAAK,SAAS4B,QAASL,GAArE,WAKF,kBAAC,EAAD,U,gFClEKM,GAAQ,CACnB,CACE,MAAS,eACT,OAAU,SACV,GAAM,IACN,KAAQ,WAEV,CACE,MAAS,QACT,OAAU,SACV,GAAM,IACN,KAAQ,SAEV,CACE,MAAS,SACT,OAAU,SACV,GAAM,IACN,KAAQ,UAEV,CACE,MAAS,QACT,OAAU,SACV,GAAM,IACN,KAAQ,SAEV,CACE,MAAS,OACT,OAAU,SACV,GAAM,IACN,KAAQ,SAICC,G,OAAUC,IAAM,SAAAC,GAAC,uBAAcA,EAAI,KAAK,GCtBtCC,GAPM,SAAC,GAAD,IAAGC,EAAH,EAAGA,UAAWC,EAAd,EAAcA,OAAd,OACnB,kBAACC,GAAA,EAAD,CAAQC,QAAQ,QAAQ7I,GAAG,SAAS2G,MAAOgC,EAAQlC,SAAU,SAAArG,GAAC,OAAIsI,EAAUtI,EAAEsG,OAAOC,SAClF9G,MAAI,SAAA8I,GAAM,OACT,kBAACG,GAAA,EAAD,CAAU9G,IAAK2G,EAAQhC,MAAOgC,GAAQ,yBAAKV,IAAKC,OAAQ,YAAqBS,EAAtB,SAAqCR,IAAKQ,EAAQI,OAAO,YAC/GT,M,ubCKP,IAAMU,GAAavD,IAAOC,IAAV,MAIVuD,GAAgBxD,IAAOC,IAAV,MAIbwD,GAAazD,IAAO0D,KAAV,MAMVxD,GAAeF,YAAOG,IAAPH,CAAH,MA2DHI,gBArDF,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACAC,mBAAS,MADT,mBACpBb,EADoB,KACbc,EADa,OAEED,mBAASqD,KAAKd,KAFhB,mBAEpBK,EAFoB,KAEZD,EAFY,OAGM3C,mBAAS,IAHf,mBAGpBsD,EAHoB,KAGVC,EAHU,KAKtBnD,EAAY,uCAAG,WAAM/F,GAAN,iBAAAsB,EAAA,6DACnBtB,EAAEgG,iBACFJ,EAAS,IAFU,kBV3BrB1E,IAAOiI,oBU2Bc,cAIXrG,EAJW,OAKXsG,EALW,2BAMZ1H,IAAI,OAAQoB,IANA,IAOfC,YAAakG,EACbhG,SAAUsF,IARK,SAWX9D,EAAe2E,GAXJ,OAYjB/B,GAASX,GAAkB0C,IAE3BtG,GAAQ4C,EAAQ/D,KAAKsD,EAAQ,UAdZ,kDAgBjBF,QAAQC,IAAI,MAAO,KAAIzC,SACvBqD,EAAS,KAAIrD,SAjBI,0DAAH,sDAqBlB,OACE,kBAACqG,GAAD,KACE,kBAAC,GAAD,MACA,kBAACC,GAAD,KACA,+GAEA,mDAAwB,kBAAC,IAAD,CAAMQ,GAAG,WAAT,YAExB,iDACA,kBAACP,GAAD,CAAY7C,SAAUF,GACpB,kBAAC,GAAD,CAAcuC,UAAWA,EAAWC,OAAQA,IAC5C,kBAACe,GAAA,EAAD,CACEC,MAAM,WACN9C,QAAQ,WACRN,KAAK,WACLE,SAAU,SAAArG,GAAC,OAAIkJ,EAAYlJ,EAAEsG,OAAOC,QACpCA,MAAO0C,IACRnE,EAAQ,2BAAIA,GAAa,KAC1B,kBAAC,GAAD,CAAc2B,QAAQ,YAAY+C,MAAM,UAAUpD,KAAK,UAAvD,0B,sMC1ER,IAAMqD,GAAcpE,YAAOqE,KAAPrE,CAAH,MAwBFsE,GAhBK,SAAC,GAAoB,IAAlBC,EAAiB,EAAjBA,WACrB,OACE,6BACE,kBAACH,GAAD,CACEhD,QAAQ,MACRoD,aAAc,CACZC,SAAU,SACVC,WAAY,UAGd,kBAACC,GAAA,EAAD,CAAQjC,IAAI,gBAAgBF,IAAKC,OAAQ,YAAqB8B,GAA0B,WAAhD,c,uhBChBhD,IAAMK,GAAgB5E,IAAOC,IAAV,MAMb4E,GAAa7E,IAAOC,IAAV,MAKV6E,GAAiB9E,IAAOC,IAAV,MAKd8E,GAAgB/E,IAAOC,IAAV,MACG,SAAA+E,GAAK,OAAIA,EAAMC,cAAgB,UAAY,aAgClDC,GA1BC,SAAC,GAAiB,IAAfhI,EAAc,EAAdA,QAAc,EACLoD,qBADK,mBACvB7C,EADuB,KACjB2E,EADiB,KAEzB/C,EAAc8F,cAAY,SAAA1D,GAAK,OAAIA,EAAMpC,eACzC4F,EAAgB5I,IAAI,MAAOgD,KAAiBhD,IAAI,SAAUa,GAUhE,OARAmF,qBAAU,WAAM,4CACd,4BAAApG,EAAA,sEACqB4B,EAAcxB,IAAI,SAAUa,IADjD,OACQO,EADR,OAEE2E,EAAQ3E,GAFV,4CADc,uBAAC,WAAD,wBAKd2H,KACC,CAAClI,IAGF,kBAAC0H,GAAD,KACE,kBAACC,GAAD,KACE,kBAAC,GAAD,CAAaN,WAAYlI,IAAI,WAAYoB,KACzC,kBAACqH,GAAD,KAAiBzI,IAAI,cAAeoB,GAAQpB,IAAI,cAAeoB,GAAQ,UAAvE,MAEF,kBAACsH,GAAD,CAAeE,cAAeA,GAC3B5I,IAAI,UAAWa,M,+BC7CXmI,GAAc,CACzBC,GAAG,GAAD,OANkB,EAMlB,MACFC,GAAG,GAAD,OANkB,GAMlB,MACFC,GAAG,GAAD,OANkB,GAMlB,MACFC,GAAG,GAAD,OANkB,GAMlB,O,+qDCKJ,IAAMC,GAAa1F,IAAOC,IAAV,MAOVuD,GAAgBxD,IAAOC,IAAV,KAOIoF,GAAYE,IAK7BI,GAAc3F,IAAO4F,GAAV,KAEMP,GAAYE,IAK7BM,GAAa7F,IAAOC,IAAV,KAGOoF,GAAYE,IAK7BO,GAAiB9F,IAAOC,IAAV,KASGoF,GAAYE,IAO7B9B,GAAazD,IAAO0D,KAAV,KAgBO2B,GAAYE,IAS7BQ,GAAmB/F,YAAOgG,KAAPhG,CAAH,KAMGqF,GAAYE,IAO/BU,G,4MACJxE,MAAQ,CACNhE,KAAM5B,IAAOwD,YACb9B,UAAM2I,EACNC,SAAU,GACVhJ,QAAS,I,EAgBXiJ,aAAe,SAAAzL,GAAC,OAAI,EAAK0L,SAAS,CAAElJ,QAASxC,EAAEsG,OAAOC,S,EAEtDR,a,uCAAe,WAAM/F,GAAN,uBAAAsB,EAAA,+DACmB,EAAKwF,MAA7BlE,EADK,EACLA,KAAME,EADD,EACCA,KAAMN,EADP,EACOA,QACpBxC,EAAEgG,iBAFW,SAILzD,EAAU,CACdC,QAASA,EACTC,UAAWkJ,KAAKC,MAChBjJ,IAAKG,EAAKH,IACVC,KAAMlB,IAAI,OAAQkB,GAAQlB,IAAI,OAAQkB,GAAQ,EAAKyH,MAAMnK,MARhD,SAULoC,EAAcC,GAVT,OAWX,EAAKmJ,SAAS,CAAElJ,QAAS,KAXd,gDAaXuC,QAAQC,IAAI,wBAAyB,KAAIzC,SAb9B,yD,wPAdLrC,EAAS2L,KAAKxB,MAAdnK,K,SAENiB,EAAGM,IAAI,aAAamC,aAAa,QAAQC,QAAQ3D,GAAM4L,GAAG,SAAS,SAAA1J,GACjE,EAAKsJ,SAAS,CAAEF,SAAUpJ,EAASC,W,SAElBsB,EAAgBzD,G,OAA7B0C,E,OACNiJ,KAAKH,SAAS,CAAE9I,S,gDAEhBmC,QAAQC,IAAI,wBAAyB,KAAIzC,S,8IAuBnC,IAAD,EAC6BsJ,KAAK/E,MAAjC0E,EADD,EACCA,SAAUhJ,EADX,EACWA,QAASI,EADpB,EACoBA,KACnB1C,EAAS2L,KAAKxB,MAAdnK,KACR,OACE,kBAAC6K,GAAD,KACE,kBAAC,GAAD,MACA,kBAAC,GAAD,KACE,kBAACC,GAAD,KAActJ,IAAI,QAASkB,IAASmJ,KAAW7L,IACtB,YAAxBwB,IAAI,SAAUkB,IAAuB,kBAACsI,GAAD,8DAAkE,gCAASxJ,IAAI,gBAAiBsK,UACtI,kBAACb,GAAD,KACG1L,MAAI,SAAA8C,GAAO,OACV,kBAAC,GAAD,CAASX,IAAKF,IAAI,YAAaa,GAAUA,QAASA,MAClDiJ,IAEJ,kBAAC,GAAD,CAAYvF,SAAU4F,KAAK9F,cACzB,2BAAOM,SAAUwF,KAAKJ,aAAclF,MAAO/D,IAC3C,kBAAC4I,GAAD,CAAkBa,aAAW,OAAO7F,KAAK,UACvC,kBAAC,KAAD,c,GAzDK8F,aAyEJC,iBAPS,SAACrF,EAAD,GAAuB,IAAbsF,EAAY,EAAZA,MAEhC,MAAO,CACLlM,KAFWwB,IAAI,cAAe0K,MAMnBD,CAAyBb,I,uLClKxC,IAAMxC,GAAazD,IAAO0D,KAAV,MAIVsD,GAAchH,IAAOC,IAAV,MA4EFgH,GAxEA,WAAO,IAAD,EACS3G,mBAAS,MADlB,mBACXb,EADW,KACJc,EADI,OAESD,mBAAS,IAFlB,mBAEX3C,EAFW,KAEJ6C,EAFI,OAGeF,mBAAS,IAHxB,mBAGXtB,EAHW,KAGDyB,EAHC,OAIeH,mBAAS,IAJxB,mBAIXsD,EAJW,KAIDC,EAJC,OAKWvD,mBAASqD,KAAKd,KALzB,mBAKXK,EALW,KAKHD,EALG,KAObvC,EAAY,uCAAG,WAAM/F,GAAN,iBAAAsB,EAAA,6DACnBtB,EAAEgG,iBACFJ,EAAS,IAFU,kBAIExB,EAAOpB,EAAOqB,GAJhB,cAIXvB,EAJW,OAKXsG,EALW,2BAMZ1H,IAAI,OAAQoB,IANA,IAOfC,YAAakG,EACbhG,SAAUsF,IARK,SAUX9D,EAAe2E,GAVJ,OAWjB/B,GAASX,GAAkB0C,IAXV,kDAajBxD,EAAS,KAAIrD,SAbI,0DAAH,sDAiBZgK,GAAYvJ,IAAUqB,IAAa4E,EAEzC,OACA,6BACE,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAYhD,SAAUF,GACpB,uCAGA,2EACA,kBAACsG,GAAD,KACE,kBAAC/C,GAAA,EAAD,CACEC,MAAM,QACN9C,QAAQ,WACRN,KAAK,QACLC,KAAK,QACLC,SAAU,SAAArG,GAAC,OAAI6F,EAAS7F,EAAEsG,OAAOC,QACjCA,MAAOvD,KAEX,kBAACqJ,GAAD,KACE,kBAAC/C,GAAA,EAAD,CACEC,MAAM,WACN9C,QAAQ,WACRN,KAAK,WACLC,KAAK,WACLC,SAAU,SAAArG,GAAC,OAAI8F,EAAY9F,EAAEsG,OAAOC,QACpCA,MAAOlC,KAEX,kBAAC,GAAD,CAAciE,UAAWA,EAAWC,OAAQA,IAC5C,kBAAC8D,GAAD,KACE,kBAAC/C,GAAA,EAAD,CACEC,MAAM,WACN9C,QAAQ,WACRN,KAAK,WACLE,SAAU,SAAArG,GAAC,OAAIkJ,EAAYlJ,EAAEsG,OAAOC,QACpCA,MAAO0C,KAEX,6BACGnE,EAAQ,2BAAIA,GAAa,KAC1B,kBAACU,EAAA,EAAD,CAAQiB,QAAQ,YAAY+C,MAAM,UAAUpD,KAAK,SAASmG,SAAUA,GAApE,e,oZCnER,IAAMtC,GAAgB5E,IAAOC,IAAV,MAObuD,GAAgBxD,IAAOC,IAAV,MAIbkH,GAAcnH,IAAOC,IAAV,MAKXmH,G,4MACJ3F,MAAQ,CACNhC,MAAO,KACPzB,MAAO,GACPG,OAAQ,GACRO,MAAO,I,EAaTgC,a,uCAAe,WAAM/F,GAAN,6BAAAsB,EAAA,+DACoB,EAAK+I,MAA9B3E,EADK,EACLA,QAAShB,EADJ,EACIA,YADJ,EAEa,EAAKoC,MAAvBzD,EAFK,EAELA,MAAOG,EAFF,EAEEA,OACfxD,EAAEgG,iBACF,EAAK0F,SAAS,CAAE5G,MAAO,KAJV,SAML4H,EAAa,CACjBrJ,QACAZ,UAAWkJ,KAAKC,MAChBlJ,OAAQgC,EAAY/B,IACpBa,UAVS,SAYQL,EAAWuJ,GAZnB,QAYL9J,EAZK,SAaH8C,EAAQ/D,KAAKsD,EAAQ,OAAQ,CAAE/E,KAAMwB,IAAI,OAAQkB,MAb9C,kDAeX,EAAK8I,SAAS,CAAE5G,MAAO,KAAIvC,UAfhB,0D,wDAmBfkJ,aAAe,SAAAzL,GAAC,OAAI,EAAK0L,SAAL,gBAAiB1L,EAAEsG,OAAOH,KAAOnG,EAAEsG,OAAOC,S,uLA5B5D,IACEpF,EAAGM,IAAI,UAAUmC,aAAa,UAAUC,QAAQ,UAAUiI,GAAG,SAAS,SAAA1J,GACpE,EAAKsJ,SAAS,CAAE3H,MAAO3B,EAASC,WAElC,MAAOsK,GACP5H,QAAQC,IAAI,sBAAuB2H,G,gIAyB7B,IAAD,EACiCd,KAAK/E,MAArChC,EADD,EACCA,MAAOzB,EADR,EACQA,MAAOG,EADf,EACeA,OAAQO,EADvB,EACuBA,MAC9B,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,MACA,kBAAC,GAAD,KACE,kDACA,0BAAMkC,SAAU4F,KAAK9F,cACnB,kBAACuD,GAAA,EAAD,CACE1J,GAAG,iBACH2J,MAAM,eACN9C,QAAQ,WACRN,KAAK,QACLE,SAAUwF,KAAKJ,aACflF,MAAOlD,IACT,kBAACuJ,GAAA,EAAD,CAAYX,aAAW,SAAS9F,KAAK,SAASI,MAAO/C,EAAQ6C,SAAUwF,KAAKJ,cAC1E,kBAACoB,GAAA,EAAD,CAAkBtG,MAAM,SAASuG,QAAS,kBAACC,GAAA,EAAD,MAAWxD,MAAM,WAC3D,kBAACsD,GAAA,EAAD,CAAkBtG,MAAM,UAAUuG,QAAS,kBAACC,GAAA,EAAD,MAAWxD,MAAM,aAE9D,6BACGzE,EAAQ,2BAAIA,GAAa,KAC1B,kBAACU,EAAA,EAAD,CAAQiB,QAAQ,YAAY+C,MAAM,UAAUpD,KAAK,UAAjD,YAKJ,6BACA,yDACA,kBAACoG,GAAD,KACG/M,MAAI,SAAAmD,GAAI,OACP,kBAAC,IAAD,CAAMyG,GAAIpE,EAAQ,OAAQ,CAAE/E,KAAMwB,IAAI,OAAQkB,KAAUhB,IAAKgB,EAAKhD,IAAK8B,IAAI,QAASkB,GAAQlB,IAAI,QAASkB,GAAQ,YAAjH,MAAiIlB,IAAI,SAAUkB,MAC9IqF,IACFxI,MAAI,SAAAmD,GAAI,OACP,kBAAC,IAAD,CAAMyG,GAAIpE,EAAQ,OAAQ,CAAE/E,KAAMwB,IAAI,OAAQkB,KAAUhB,IAAKgB,EAAKhD,IAAK8B,IAAI,QAASkB,GAAQlB,IAAI,QAASkB,GAAQ,YAAjH,MAAiIlB,IAAI,SAAUkB,MAC9ImB,U,GAzEKmI,aAqFLzG,eAAW0G,cAJF,SAAArF,GAAK,MAAK,CAChCpC,YAAaoC,EAAMpC,eAGKyH,CAAyBM,KCtG7CO,GAAe,SAAC,GAAD,IAAcd,EAAd,EAAGe,UAAsBC,EAAzB,EAAyBA,cAAkBC,EAA3C,oDACnB,kBAAC,IAAD,iBACMA,EADN,CAEEC,OAAQ,SAAA/C,GAAK,OAAI6C,EACb,kBAAChB,EAAc7B,GACf,kBAAC,IAAD,CAAUhB,GAAI,CAAEgE,SAAU,IAAKvG,MAAO,CAAEwG,KAAMjD,EAAMkD,kBAItDC,GAAc,SAAC,GAAD,IAActB,EAAd,EAAGe,UAAsBC,EAAzB,EAAyBA,cAAkBC,EAA3C,oDAClB,kBAAC,IAAD,iBACMA,EADN,CAEEC,OAAQ,SAAA/C,GAAK,OAAK6C,EAEd,kBAAC,IAAD,CAAU7D,GAAIpE,EAAQ,WADtB,kBAACiH,EAAc7B,QA6CRoD,G,4MAvCb3G,MAAQ,CACNoG,eAAe,EACfQ,SAAS,G,kEAGU,IAAD,OAClBxM,IAAOyM,oBAAmB,SAAA7K,GACpBA,GACF,EAAK4I,SAAS,CACZwB,eAAe,EACfQ,SAAS,IAEXrG,GAASX,GAAkB5D,KAE3B,EAAK4I,SAAS,CACZwB,eAAe,EACfQ,SAAS,S,+BAMP,IAAD,EAC4B7B,KAAK/E,MAAhCoG,EADD,EACCA,cACR,OAFO,EACgBQ,QAEnB,0CAEA,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAaE,OAAK,EAACrM,KAAM0D,EAAQ,QAASiI,cAAeA,EAAeD,UAAWY,KACnF,kBAAC,GAAD,CAActM,KAAM0D,EAAQ,SAAUiI,cAAeA,EAAeD,UAAWR,KAC/E,kBAAC,GAAD,CAAclL,KAAM0D,EAAQ,OAAQ,CAAE/E,KAAM,UAAYgN,cAAeA,EAAeD,UAAW3B,KACjG,kBAAC,GAAD,CAAa/J,KAAM0D,EAAQ,UAAWiI,cAAeA,EAAeD,UAAWX,W,GAjCzEJ,aCtBE4B,QACW,cAA7B9B,OAAOuB,SAASQ,UAEe,UAA7B/B,OAAOuB,SAASQ,UAEhB/B,OAAOuB,SAASQ,SAAS3B,MACvB,2D,OCTN4B,IAASZ,OACP,kBAAC,KAAD,CAAUnG,MAAOA,IACf,kBAAC,GAAD,OAEFgH,SAASC,eAAe,SDsHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBzJ,MAAK,SAAA0J,GACJA,EAAaC,gBAEd1J,OAAM,SAAAC,GACLC,QAAQD,MAAMA,EAAMvC,c","file":"static/js/main.e740776f.chunk.js","sourcesContent":["var map = {\n\t\"./avatar-1.jpg\": 366,\n\t\"./avatar-2.jpg\": 367,\n\t\"./avatar-3.jpg\": 368,\n\t\"./avatar-4.jpg\": 369,\n\t\"./avatar-5.jpg\": 370,\n\t\"./avatar-6.jpg\": 371,\n\t\"./avatar-7.jpg\": 372,\n\t\"./avatar-8.jpg\": 373\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 188;","module.exports = __webpack_public_path__ + \"static/media/chatrooms_logo.ff196929.png\";","module.exports = __webpack_public_path__ + \"static/media/avatar-1.419b61af.jpg\";","module.exports = __webpack_public_path__ + \"static/media/avatar-2.84d9cafb.jpg\";","module.exports = __webpack_public_path__ + \"static/media/avatar-3.38447929.jpg\";","module.exports = __webpack_public_path__ + \"static/media/avatar-4.e4d0ffba.jpg\";","module.exports = __webpack_public_path__ + \"static/media/avatar-5.cab40919.jpg\";","module.exports = __webpack_public_path__ + \"static/media/avatar-6.7c609b74.jpg\";","module.exports = __webpack_public_path__ + \"static/media/avatar-7.e1c2371f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/avatar-8.a4b9282a.jpg\";","import firebase from 'firebase/app'\nimport 'firebase/auth'\nimport 'firebase/database'\nimport { FIREBASE_CONFIG } from '../config'\n\nfirebase.initializeApp(FIREBASE_CONFIG)\n\nexport const auth = firebase.auth\nexport const db = firebase.database()","export const FIREBASE_CONFIG = {\n  apiKey: \"AIzaSyABrFCQSJz9_Pt74JlNNrJn-0-8fLTF2ck\",\n  authDomain: \"chat-c5a1b.firebaseapp.com\",\n  databaseURL: \"https://chat-c5a1b.firebaseio.com\",\n  projectId: \"chat-c5a1b\",\n  storageBucket: \"chat-c5a1b.appspot.com\",\n  messagingSenderId: \"192394678210\",\n  appId: \"1:192394678210:web:a1fec82d3182705707d05b\",\n  measurementId: \"G-NK798QJTRN\"\n}","import { db } from '../services/firebase'\nimport get from 'lodash/fp/get'\nimport flow from 'lodash/fp/flow'\nimport sortBy from 'lodash/fp/sortBy'\nimport last from 'lodash/fp/last'\nimport { generateRoomCode } from './utils'\n\nexport const addFirebaseNode = async ({ path, entity }) => {\n  const ref = db.ref(path)\n  const id = get('id', entity) ? entity.id : await ref.push().key\n  const node = {\n    id,\n    ...entity\n  }\n  await ref.child(id).set(node)\n  return node\n}\n\nexport const updateFirebaseNode = async ({ path, entity, query = q => q }) => {\n  const ref = db.ref(path)\n  const id = get('id', entity) ? entity.id : await ref.push().key\n  await query(ref).update({\n    ...entity,\n    id\n  })\n  return entity\n}\n\nexport const listenFirebaseNode = async ({ path, onData, query = q => q }) => {\n  const ref = query(db.ref(path))\n  ref.off()\n  ref.on('value', snapshot => {\n    const val = snapshot.val()\n    onData && onData(val)\n  })\n  return path\n}\n\nexport const fetchFirebaseNode = async ({ path, query = q => q }) => {\n  const snapshot = await query(db.ref(path)).once('value')\n  return snapshot.val()\n}\n\nexport const writeMessages = async message => {\n  const entity = {\n    content: message.content,\n    timestamp: message.timestamp,\n    userId: message.uid,\n    room: message.room\n  }\n  await addFirebaseNode({\n    path: '/messages',\n    entity\n  })\n}\n\nexport const createUser = async user => {\n  const entity = {\n    displayName: user.displayName,\n    email: user.email,\n    id: user.uid,\n    photoURL: user.photoURL\n  }\n  await addFirebaseNode({\n    path: '/users',\n    entity\n  })\n}\n\nexport const fetchUserById = async userId => {\n  const user = await fetchFirebaseNode({\n    path: `users/${userId}`\n  })\n  return user\n}\n\nexport const createRoom = async data => {\n  const entity = {\n    title: data.title,\n    createdAt: data.timestamp,\n    createBy: data.userId,\n    access: data.access,\n    code: generateRoomCode()\n  }\n  const room = await addFirebaseNode({\n    path: '/rooms',\n    entity\n  })\n  return room\n}\n\nexport const fetchRoomByCode = async code => {\n  const rooms = await fetchFirebaseNode({\n    path: '/rooms',\n    query: q => \n      q\n        .orderByChild('code')\n        .equalTo(code)\n        .limitToLast(1)\n  })\n  const room = flow(\n    sortBy('createdAt'),\n    last\n  )(Object.values(rooms))\n\n  return room\n}","import random from 'lodash/random'\nimport padStart from 'lodash/padStart'\n\nexport const generateRoomCode = () => padStart(random(0, 9999), 4, '0')","import { auth } from '../services/firebase'\nimport { createUser } from '../helpers/db'\n\nexport const signup = (email, password) => \n  auth().createUserWithEmailAndPassword(email, password)\n\nexport const signin = (email, password) =>\n  auth().signInWithEmailAndPassword(email, password)\n\nexport const signout = () => \n  auth().signOut()\n\nexport const signinAsGuest = () =>\n  auth().signInAnonymously()\n\nexport const updateUserData = user => {\n  const currentUser = auth().currentUser\n  currentUser.updateProfile(user).then(async () => {\n    await createUser(user)\n  }).catch(error => {\n    console.log('Error updating user data:', error);\n  })\n}\n","export const getPath = (routeName, params = {}) => {\n  switch (routeName) {\n    case 'home':\n      return '/'\n    case 'signup':\n      return '/signup'\n    case 'rooms':\n      return '/rooms'\n    case 'room':\n      return `/room/${params.code}`\n    default:\n      return routeName\n  }\n}\n\nexport default {}","import React, { useState } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { signin } from '../helpers/auth'\nimport { getPath } from '../helpers/routes'\nimport Button from '@material-ui/core/Button'\n\nconst StyledLogin = styled.div`\n  input {\n    margin: 0 3px;\n  }\n  button {\n    margin-right: 5px;\n  }\n`\n\nconst StyledButton = styled(Button)`\n  && {\n    color: #ffffff;\n    border-color: #ffffff;\n  }\n`\n\nconst Login = ({ history }) => {\n  const [ error, setError ] = useState(null)\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n\n  const handleSubmit = async e => {\n    e.preventDefault()\n    setError('')\n    try {\n      const user = await signin(email, password)\n      user && history.push(getPath('rooms'))\n    } catch (err) {\n      setError(err.message)\n    }\n  }\n\n  return (\n    <StyledLogin>\n      <form onSubmit={handleSubmit}>\n        <input \n          placeholder=\"Email\" \n          name=\"email\" \n          type=\"email\" \n          onChange={e => setEmail(e.target.value)}\n          value={email}>\n        </input>\n        <input \n          placeholder=\"Password\" \n          name=\"password\" \n          type=\"password\" \n          onChange={e => setPassword(e.target.value)}\n          value={password}>\n        </input>\n        {error ? <p>{error}</p> : null}\n        <StyledButton size=\"small\" variant=\"outlined\" type=\"submit\">\n          Login\n        </StyledButton>\n      </form>\n    </StyledLogin>\n  )\n}\n\nexport default withRouter(Login)","export const UPDATE_CURRENT_USER = 'update.current.user'\nexport const updateCurrentUser = user => ({\n  type: UPDATE_CURRENT_USER,\n  payload: { user }\n})\n\nexport const REMOVE_CURRENT_USER = 'entities.remove'\nexport const removeCurrentUser = user => ({\n  type: REMOVE_CURRENT_USER,\n  payload: { user }\n})","import { UPDATE_CURRENT_USER, REMOVE_CURRENT_USER } from '../actions/currentUser'\n\nconst reducer = (state = [], { type, payload }) => {\n  switch (type) {\n    case UPDATE_CURRENT_USER:\n      return {\n        ...state,\n        ...payload.user\n      }\n    case REMOVE_CURRENT_USER:\n      return {\n        ...payload.user\n      }\n    default:\n      return state\n  }\n}\n\nexport default reducer","import { combineReducers } from 'redux'\nimport currentUser from './currentUser'\n\nconst reducers = combineReducers({\n  currentUser\n})\n\nexport default reducers","import { applyMiddleware, createStore } from 'redux'\nimport logger from 'redux-logger'\nimport rootReducer from '../reducers'\n\nconst middlewares = []\nif (process.env.NODE_ENV === 'development') {\n  middlewares.push(logger)\n}\n\nconst store = createStore(rootReducer, applyMiddleware(...middlewares))\n\nexport const dispatch = store.dispatch\n\nexport default store","import React, { useState, useEffect } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\nimport { auth } from '../services/firebase'\nimport { signout } from '../helpers/auth'\nimport get from 'lodash/fp/get'\nimport Login from './Login'\nimport { getPath } from '../helpers/routes'\nimport { dispatch } from '../services/store'\nimport { removeCurrentUser } from '../actions/currentUser'\nimport Button from '@material-ui/core/Button'\n\nconst StyledHeader = styled.div`\n  position: absolute;\n  top: 0;\n  background-color: #625672;\n  height: 50px;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: #ffffff;\n\n  button {\n    margin-right: 5px;\n  }\n`\n\nconst StyledLogo = styled.img`\n  height: 100%;\n  cursor: pointer;\n`\n\nconst StyledButton = styled(Button)`\n  && {\n    color: #ffffff;\n    border-color: #ffffff;\n  }\n`\n\nconst Header = ({ history }) => {\n  const [ currentUser, setUser ] = useState()\n\n  useEffect(() => {\n    setUser(auth().currentUser)\n  }, [])\n\n  const logout = async() => {\n    const user = await signout()\n    dispatch(removeCurrentUser(user))\n  }\n\n  const backToHome = () => currentUser ? history.push(getPath('rooms')) : history.push(getPath('home'))\n\n  return (\n    <StyledHeader>\n      <StyledLogo src={require(\"../assets/chatrooms_logo.png\")} alt=\"Logo Chat Rooms\" onClick={backToHome} />\n      {currentUser \n      ? (\n        <>\n          <div>\n            Login in as: <strong>{get('displayName', currentUser) ? get('displayName', currentUser) : 'Anonyme'}</strong>\n          </div>\n          <StyledButton size=\"small\" variant=\"outlined\" type=\"submit\" onClick={logout}>\n            Logout\n          </StyledButton>\n        </>\n      )\n      : <Login />\n      }\n    </StyledHeader>\n  )\n}\n\nexport default withRouter(Header)","import times from 'lodash/fp/times'\n\nexport const ROOMS = [\n  {\n    'title': 'General Room',\n    'access': 'public',\n    'id': '1',\n    'code': 'general'\n  },\n  {\n    'title': 'Music',\n    'access': 'public',\n    'id': '2',\n    'code': 'music'\n  },\n  {\n    'title': 'Movies',\n    'access': 'public',\n    'id': '3',\n    'code': 'movies'\n  },\n  {\n    'title': 'Sport',\n    'access': 'public',\n    'id': '4',\n    'code': 'sport'\n  },\n  {\n    'title': 'News',\n    'access': 'public',\n    'id': '5',\n    'code': 'news'\n  }\n]\n\nexport const AVATARS = times(i => `avatar-${i + 1}`, 8) ","import React from 'react'\nimport map from 'lodash/fp/map'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport { AVATARS } from '../helpers/fixtures'\n\nconst SelectAvatar = ({ setAvatar, avatar }) => \n  <Select labelId=\"label\" id=\"select\" value={avatar} onChange={e => setAvatar(e.target.value)}>\n    {map(avatar => (\n      <MenuItem key={avatar} value={avatar}><img src={require(`../assets/avatars/${avatar}.jpg`)} alt={avatar} height=\"60px\"/></MenuItem>\n    ), AVATARS)}\n  </Select>\n\nexport default SelectAvatar\n","import React, { useState } from 'react'\nimport { Link, withRouter } from 'react-router-dom'\nimport { signinAsGuest, updateUserData } from '../helpers/auth'\nimport Header from '../components/Header'\nimport styled from 'styled-components'\nimport get from 'lodash/fp/get'\nimport head from 'lodash/fp/head'\nimport { dispatch } from '../services/store'\nimport { updateCurrentUser } from '../actions/currentUser'\nimport { getPath } from '../helpers/routes'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\nimport SelectAvatar from '../components/SelectAvatar'\nimport { AVATARS } from '../helpers/fixtures'\n\nconst StyledHome = styled.div`\n  text-align: center;\n`\n\nconst StyledContent = styled.div`\n  margin-top: 100px;\n`\n\nconst StyledForm = styled.form`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\nconst StyledButton = styled(Button)`\n  && {\n    margin: 10px;\n  }\n`\n\nconst Home = ({ history }) => {\n  const [ error, setError ] = useState(null)\n  const [ avatar, setAvatar ] = useState(head(AVATARS))\n  const [ username, setUsername ] = useState('')\n\n  const handleSubmit = async e => {\n    e.preventDefault()\n    setError('')\n    try {\n      const user = await signinAsGuest()\n      const userData = {\n        ...get('user', user),\n        displayName: username,\n        photoURL: avatar\n      }\n      \n      await updateUserData(userData)\n      dispatch(updateCurrentUser(userData))\n\n      user && history.push(getPath('rooms'))\n    } catch (err) {\n      console.log('err', err.message)\n      setError(err.message)\n    }\n  }\n  \n  return (\n    <StyledHome>\n      <Header />\n      <StyledContent>\n      <h2>Join a room and chat with other people or create yours to invite your friends !</h2>\n\n      <p>Create your account: <Link to=\"/signup\">Sign Up</Link></p>\n\n      <p>Or chat as guest: </p>\n      <StyledForm onSubmit={handleSubmit}>\n        <SelectAvatar setAvatar={setAvatar} avatar={avatar} />\n        <TextField \n          label=\"Username\" \n          variant=\"outlined\" \n          name=\"username\" \n          onChange={e => setUsername(e.target.value)}\n          value={username} />\n        {error ? <p>{error}</p> : null}\n        <StyledButton variant=\"contained\" color=\"primary\" type=\"submit\">\n          Start chatting !\n        </StyledButton>\n      </StyledForm>\n      </StyledContent>\n    </StyledHome>\n  )\n}\n\nexport default withRouter(Home)","import React from 'react'\nimport styled from 'styled-components'\nimport Badge from '@material-ui/core/Badge'\nimport Avatar from '@material-ui/core/Avatar'\n\nconst StyledBadge = styled(Badge)`\n  && {\n    .MuiBadge-dot {\n      background-color: #44b700;\n    }\n  }\n`\n\nconst AvatarBadge = ({ userAvatar }) => {\n  return (\n    <div>\n      <StyledBadge \n        variant=\"dot\" \n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'right',\n        }}\n      >\n        <Avatar alt=\"User's avatar\" src={require(`../assets/avatars/${userAvatar ? userAvatar : 'avatar-1'}.jpg`)} />\n      </StyledBadge>\n    </div>\n  )\n}\n\nexport default AvatarBadge","import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport get from 'lodash/fp/get'\nimport { useSelector } from 'react-redux'\nimport AvatarBadge from './AvatarBadge'\nimport { fetchUserById } from '../helpers/db'\n\nconst StyledWrapper = styled.div`\n  display: flex;\n  align-items: flex-start;\n  margin: 15px 0;\n`\n\nconst StyledUser = styled.div`\n  display: flex;\n  align-items: center;\n`\n\nconst StyledUsername = styled.div`\n  font-weight: bold;\n  margin: 0 5px;\n`\n\nconst StyledMessage = styled.div`\n  background-color: ${props => props.isCurrentUser ? '#f9d3b2' : '#cbe3fb'};\n  border-radius: 40px;\n  padding: 10px 20px;\n  width: fit-content;\n`\n\nconst Message = ({ message }) => {\n  const [ user, setUser ] = useState()\n  const currentUser = useSelector(state => state.currentUser)\n  const isCurrentUser = get('uid', currentUser) === get('userId', message)\n\n  useEffect(() => {\n    async function fetchUser() {\n      const user = await fetchUserById(get('userId', message))\n      setUser(user)\n    }\n    fetchUser()\n  }, [message])\n\n  return (\n    <StyledWrapper>\n      <StyledUser>\n        <AvatarBadge userAvatar={get('photoURL', user)} />\n        <StyledUsername>{get('displayName', user) ? get('displayName', user) : 'Anonyme'}:</StyledUsername>\n      </StyledUser>\n      <StyledMessage isCurrentUser={isCurrentUser}>\n        {get('content', message)}\n      </StyledMessage>\n    </StyledWrapper>\n  )\n}\n\nexport default Message","const BREAKPOINT_XS = 0\nconst BREAKPOINT_SM = 48\nconst BREAKPOINT_MD = 64\nconst BREAKPOINT_LG = 75\n\nexport const BREAKPOINTS = {\n  xs: `${BREAKPOINT_XS}em`,\n  sm: `${BREAKPOINT_SM}em`,\n  md: `${BREAKPOINT_MD}em`,\n  lg: `${BREAKPOINT_LG}em`\n}","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { auth, db } from '../services/firebase'\nimport { writeMessages, fetchRoomByCode } from '../helpers/db'\nimport get from 'lodash/fp/get'\nimport map from 'lodash/fp/map'\nimport capitalize from 'lodash/capitalize'\nimport Message from '../components/Message'\nimport Header from '../components/Header'\nimport IconButton from '@material-ui/core/IconButton'\nimport SendIcon from '@material-ui/icons/Send'\nimport { BREAKPOINTS } from '../helpers/theme'\n\nconst StyledChat = styled.div`\n  background-color: #a0d3ff;\n  height: 100vh;\n  margin: 0;\n  overflow: hidden;\n`\n\nconst StyledContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n\n  @media (max-width: ${BREAKPOINTS.sm}) {\n    padding-top: 20px;\n  }\n`\n\nconst StyledTitle = styled.h1`\n  color: #1977af;\n  @media (max-width: ${BREAKPOINTS.sm}) {\n    font-size: 20px;\n  }\n`\n\nconst StyledInfo = styled.div`\n  color: red;\n  text-align: center;\n  @media (max-width: ${BREAKPOINTS.sm}) {\n    font-size: 10px;\n  }\n`\n\nconst StyledMessages = styled.div`\n  background-color: #ffffff;\n  border: 3px solid #35aef5;\n  border-radius: 20px;\n  padding: 15px;\n  width: 70%;\n  height: 70%;\n  overflow-y: auto;\n\n  @media (max-width: ${BREAKPOINTS.sm}) {\n    width: 90%;\n    padding: 7px;\n    font-size: 12px;\n  }\n`\n\nconst StyledForm = styled.form`\n  width: 70%;\n  text-align: center;\n  margin: 10px;\n  display:flex;\n  align-items: center;\n\n  input {\n    height: 40px;\n    border-radius: 20px;\n    border: transparent;\n    padding: 5px 20px;\n    font-size: 16px;\n    flex-grow: 1;\n  }\n\n  @media (max-width: ${BREAKPOINTS.sm}) {\n    width: 90%;\n    margin: 0;\n    input {\n      height: 25px;\n    }\n  }\n`\n\nconst StyledIconButton = styled(IconButton)`\n  && {\n    background-color: #1977af;\n    color: #ffffff;\n    margin: 10px;\n\n    @media (max-width: ${BREAKPOINTS.sm}) {\n      margin: 5px;\n      padding: 9px;\n    }\n  }\n`\n\nclass Chat extends Component {\n  state = {\n    user: auth().currentUser,\n    room: undefined,\n    messages: [],\n    content: ''\n  }\n\n  async componentDidMount() {\n    const { code } = this.props\n    try {\n      db.ref('/messages').orderByChild('room').equalTo(code).on('value', snapshot => {\n        this.setState({ messages: snapshot.val() })\n      })\n      const room = await fetchRoomByCode(code)\n      this.setState({ room })\n    } catch (err) {\n      console.log(\"Fail to read messages\", err.message )\n    }\n  }\n\n  handleChange = e => this.setState({ content: e.target.value })\n\n  handleSubmit = async e => {\n    const { room, user, content } = this.state\n    e.preventDefault()\n    try {\n      const message = {\n        content: content,\n        timestamp: Date.now(),\n        uid: user.uid,\n        room: get('code', room) ? get('code', room) : this.props.code\n      }\n      await writeMessages(message)\n      this.setState({ content: '' })\n    } catch (err) {\n      console.log(\"Fail to write message\", err.message)\n    }\n  }\n\n  render() {\n    const { messages, content, room } = this.state\n    const { code } = this.props\n    return (\n      <StyledChat>      \n        <Header />\n        <StyledContent>\n          <StyledTitle>{get('title', room) || capitalize(code)}</StyledTitle>\n          {get('access', room) === 'private' && <StyledInfo>This room is private, invite your friends to join in: <strong>{get('location.href', window)}</strong></StyledInfo>}\n          <StyledMessages>\n            {map(message => \n              <Message key={get('timestamp', message)} message={message} />\n            , messages)}\n          </StyledMessages>\n          <StyledForm onSubmit={this.handleSubmit}>\n            <input onChange={this.handleChange} value={content}></input>\n            <StyledIconButton aria-label=\"send\" type=\"submit\">\n              <SendIcon />\n            </StyledIconButton>\n          </StyledForm>\n        </StyledContent>\n      </StyledChat>\n    )\n  }\n}\n\nconst mapStateToProps = (state, { match }) => {\n  const code = get('params.code', match)\n  return {\n    code\n  }\n}\n\nexport default connect(mapStateToProps)(Chat)","import React, { useState } from 'react'\nimport styled from 'styled-components'\nimport { signup, updateUserData } from '../helpers/auth'\nimport get from 'lodash/fp/get'\nimport head from 'lodash/fp/head'\nimport { dispatch } from '../services/store'\nimport { updateCurrentUser } from '../actions/currentUser'\nimport Header from '../components/Header'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\nimport SelectAvatar from '../components/SelectAvatar'\nimport { AVATARS } from '../helpers/fixtures'\n\nconst StyledForm = styled.form`\n  margin: 100px;\n`\n\nconst StyledInput = styled.div`\n  margin: 10px 0;\n`\n\nconst Signup = () => {\n  const [ error, setError ] = useState(null)\n  const [ email, setEmail ] = useState('')\n  const [ password, setPassword ] = useState('')\n  const [ username, setUsername ] = useState('')\n  const [ avatar, setAvatar ] = useState(head(AVATARS))\n\n  const handleSubmit = async e => {\n    e.preventDefault()\n    setError('')\n    try {\n      const user = await signup(email, password)\n      const userData = {\n        ...get('user', user),\n        displayName: username,\n        photoURL: avatar\n      }\n      await updateUserData(userData)\n      dispatch(updateCurrentUser(userData))\n    } catch (err) {\n      setError(err.message)\n    }\n  }\n\n  const disabled = !email || !password || !username\n\n  return (\n  <div>\n    <Header />\n    <StyledForm onSubmit={handleSubmit}>\n      <h1>\n        Sign Up\n      </h1>\n      <p>Fill in the form below to create an account.</p>\n      <StyledInput>\n        <TextField \n          label=\"Email\" \n          variant=\"outlined\" \n          name=\"email\" \n          type=\"email\"\n          onChange={e => setEmail(e.target.value)}\n          value={email} />\n      </StyledInput>\n      <StyledInput>\n        <TextField \n          label=\"Password\" \n          variant=\"outlined\" \n          name=\"password\" \n          type=\"password\"\n          onChange={e => setPassword(e.target.value)}\n          value={password} />\n      </StyledInput>\n      <SelectAvatar setAvatar={setAvatar} avatar={avatar} />\n      <StyledInput>\n        <TextField \n          label=\"Username\" \n          variant=\"outlined\" \n          name=\"username\" \n          onChange={e => setUsername(e.target.value)}\n          value={username} />\n      </StyledInput>\n      <div>\n        {error ? <p>{error}</p> : null}\n        <Button variant=\"contained\" color=\"primary\" type=\"submit\" disabled={disabled}>\n          Sign up\n        </Button>\n      </div>\n    </StyledForm>\n  </div>\n  )\n}\n\nexport default Signup","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Link, withRouter } from 'react-router-dom'\nimport styled from 'styled-components'\nimport Header from '../components/Header'\nimport map from 'lodash/fp/map'\nimport get from 'lodash/fp/get'\nimport { ROOMS } from '../helpers/fixtures'\nimport TextField from '@material-ui/core/TextField'\nimport Radio from '@material-ui/core/Radio'\nimport RadioGroup from '@material-ui/core/RadioGroup'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Button from '@material-ui/core/Button'\nimport { createRoom } from '../helpers/db'\nimport { getPath } from '../helpers/routes'\nimport { db } from '../services/firebase'\n\nconst StyledWrapper = styled.div`\n  background-color: #e4dcea;\n  height: 100vh;\n  margin: 0;\n  overflow: hidden;\n`\n\nconst StyledContent = styled.div`\n  padding: 50px;\n`\n\nconst StyledRooms = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n\nclass Rooms extends Component {\n  state = {\n    error: null,\n    title: '',\n    access: '',\n    rooms: []\n  }\n\n  async componentDidMount() {\n    try {\n      db.ref('/rooms').orderByChild('access').equalTo('public').on('value', snapshot => {\n        this.setState({ rooms: snapshot.val() })\n      })\n    } catch (err) {\n      console.log(\"Fail to fetch rooms\", err)\n    }\n  }\n\n  handleSubmit = async e => {\n    const { history, currentUser } = this.props\n    const { title, access } = this.state\n    e.preventDefault()\n    this.setState({ error: '' })\n    try {\n      const roomEntity = {\n        title,\n        timestamp: Date.now(),\n        userId: currentUser.uid,\n        access\n      }\n      const room = await createRoom(roomEntity)\n      room && history.push(getPath('room', { code: get('code', room) }))\n    } catch (err) {\n      this.setState({ error: err.message })\n    }\n  }\n\n  handleChange = e => this.setState({ [e.target.name]: e.target.value })\n\n  render() {\n    const { error, title, access, rooms } = this.state\n    return (\n      <StyledWrapper>      \n        <Header />\n        <StyledContent>\n          <h2>Create your room !</h2>\n          <form onSubmit={this.handleSubmit}>\n            <TextField \n              id=\"outlined-basic\" \n              label=\"Room's title\" \n              variant=\"outlined\" \n              name=\"title\" \n              onChange={this.handleChange}\n              value={title} />\n            <RadioGroup aria-label=\"access\" name=\"access\" value={access} onChange={this.handleChange}>\n              <FormControlLabel value=\"public\" control={<Radio />} label=\"Public\" />\n              <FormControlLabel value=\"private\" control={<Radio />} label=\"Private\" />\n            </RadioGroup>\n            <div>\n              {error ? <p>{error}</p> : null}\n              <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n                Create\n              </Button>\n            </div>\n          </form>\n          <hr></hr>\n          <h2>Or join an existing room:</h2>\n          <StyledRooms>\n            {map(room => (\n              <Link to={getPath('room', { code: get('code', room) })} key={room.id}>{get('title', room) ? get('title', room) : 'Chat Room'} - {get('access', room)}</Link>\n            ), ROOMS)}\n            {map(room => (\n              <Link to={getPath('room', { code: get('code', room) })} key={room.id}>{get('title', room) ? get('title', room) : 'Chat Room'} - {get('access', room)}</Link>\n            ), rooms)}\n          </StyledRooms>\n        </StyledContent>\n      </StyledWrapper>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  currentUser: state.currentUser\n})\n\nexport default withRouter(connect(mapStateToProps)(Rooms))","import React, { Component } from 'react'\nimport {\n  Route,\n  HashRouter as Router,\n  Switch,\n  Redirect\n} from 'react-router-dom'\nimport Home from './pages/Home'\nimport Chat from './pages/Chat'\nimport Signup from './pages/Signup'\nimport Rooms from './pages/Rooms'\nimport { auth } from './services/firebase'\nimport { dispatch } from './services/store'\nimport { updateCurrentUser } from './actions/currentUser'\nimport { getPath } from './helpers/routes'\n\nconst PrivateRoute = ({ component: Component, authenticated, ...rest }) => \n  <Route \n    {...rest}\n    render={props => authenticated\n      ? <Component {...props} />\n      : <Redirect to={{ pathname: \"/\", state: { from: props.location } }} />\n    }\n  />\n\nconst PublicRoute = ({ component: Component, authenticated, ...rest }) =>\n  <Route \n    {...rest}\n    render={props => !authenticated\n      ? <Component {...props} />\n      : <Redirect to={getPath('rooms')} />\n    }\n  />\n\nclass App extends Component {\n  state = {\n    authenticated: false,\n    loading: true\n  }\n\n  componentDidMount() {\n    auth().onAuthStateChanged(user => {\n      if (user) {\n        this.setState({ \n          authenticated: true,\n          loading: false\n        })\n        dispatch(updateCurrentUser(user))\n      } else {\n        this.setState({ \n          authenticated: false,\n          loading: false\n        })\n      }\n    })\n  }\n\n  render() {\n    const { authenticated, loading } = this.state\n    return loading \n      ? <h2>Loading...</h2>\n      : (\n        <Router>\n          <Switch>\n            <PublicRoute exact path={getPath('home')} authenticated={authenticated} component={Home}></PublicRoute>\n            <PrivateRoute path={getPath('rooms')} authenticated={authenticated} component={Rooms}></PrivateRoute>\n            <PrivateRoute path={getPath('room', { code: ':code' })} authenticated={authenticated} component={Chat}></PrivateRoute>\n            <PublicRoute path={getPath('signup')} authenticated={authenticated} component={Signup}></PublicRoute>\n          </Switch>\n        </Router>\n      )\n  }\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux'\nimport store from './services/store'\n\nimport './index.css'\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n\nserviceWorker.unregister();\n"],"sourceRoot":""}